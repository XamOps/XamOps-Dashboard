<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xammer - Waste Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-100">

<div class="flex h-screen bg-white">
    <!-- Sidebar -->
    <div class="w-64 flex-shrink-0 border-r border-gray-200 flex flex-col" th:insert="~{dashboard :: .w-64}">
        <!-- Sidebar will be inserted from the main dashboard template -->
    </div>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col">
        <header class="h-16 flex items-center justify-between border-b bg-white px-6">
            <h1 class="text-xl font-semibold text-gray-800">Waste Management</h1>
        </header>

        <div class="flex-1 overflow-y-auto p-6 space-y-6" x-data="{ filter: 'All' }">
            <div class="bg-white p-6 rounded-lg shadow-sm">
                <!-- Filter Controls -->
                <div class="flex flex-wrap items-center gap-2 mb-4 border-b pb-3">
                    <span class="text-sm font-medium text-gray-600 mr-2">Show for:</span>
                    <button @click="filter = 'All'" :class="{ 'bg-indigo-600 text-white': filter === 'All', 'bg-gray-200 text-gray-700': filter !== 'All' }" class="px-3 py-1 text-sm rounded-full transition">All</button>
                    <button @click="filter = 'AMI'" :class="{ 'bg-indigo-600 text-white': filter === 'AMI', 'bg-gray-200 text-gray-700': filter !== 'AMI' }" class="px-3 py-1 text-sm rounded-full transition">AMI</button>
                    <button @click="filter = 'Elastic IP'" :class="{ 'bg-indigo-600 text-white': filter === 'Elastic IP', 'bg-gray-200 text-gray-700': filter !== 'Elastic IP' }" class="px-3 py-1 text-sm rounded-full transition">Elastic IP</button>
                    <button @click="filter = 'Snapshot'" :class="{ 'bg-indigo-600 text-white': filter === 'Snapshot', 'bg-gray-200 text-gray-700': filter !== 'Snapshot' }" class="px-3 py-1 text-sm rounded-full transition">Snapshots</button>
                    <button @click="filter = 'EBS Volume'" :class="{ 'bg-indigo-600 text-white': filter === 'EBS Volume', 'bg-gray-200 text-gray-700': filter !== 'EBS Volume' }" class="px-3 py-1 text-sm rounded-full transition">Volumes</button>
                    <!-- Add other buttons here as we implement them -->
                </div>

                <!-- Wasted Resources Table -->
                <div class="overflow-x-auto">
                    <div th:if="${#lists.isEmpty(wastedResources)}" class="text-center py-12 px-4 border-2 border-dashed rounded-lg">
                         <div class="mx-auto h-12 w-12 text-green-400">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                         </div>
                        <h3 class="mt-2 text-sm font-medium text-gray-900">No wasted resources found!</h3>
                        <p class="mt-1 text-sm text-gray-500">Your account appears to be clean and optimized.</p>
                    </div>

                    <table th:if="${not #lists.isEmpty(wastedResources)}" class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th class="px-6 py-3">Name / ID</th>
                                <th class="px-6 py-3">Type</th>
                                <th class="px-6 py-3">Region</th>
                                <th class="px-6 py-3">Monthly Cost</th>
                                <th class="px-6 py-3">Reason</th>
                                <th class="px-6 py-3 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="resource in T(JSON).parse(T(JSON).stringify([[${wastedResources}]]))[0]" :key="resource.resourceId">
                                <tr x-show="filter === 'All' || filter === resource.resourceType" class="border-b hover:bg-gray-50" x-transition>
                                    <td class="px-6 py-4">
                                        <p class="font-medium text-gray-900" x-text="resource.resourceName"></p>
                                        <p class="text-xs text-gray-500 font-mono" x-text="resource.resourceId"></p>
                                    </td>
                                    <td class="px-6 py-4" x-text="resource.resourceType"></td>
                                    <td class="px-6 py-4" x-text="resource.region"></td>
                                    <td class="px-6 py-4 font-mono text-red-600" x-text="'$' + parseFloat(resource.monthlySavings).toFixed(2)"></td>
                                    <td class="px-6 py-4" x-text="resource.reason"></td>
                                    <td class="px-6 py-4 text-center space-x-2">
                                        <button class="px-3 py-1 text-xs font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:bg-gray-400" disabled title="Delete action will be enabled in a future phase">
                                            <i class="fas fa-trash-alt mr-1"></i>Remove
                                        </button>
                                        <button class="px-3 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:bg-gray-400" disabled>
                                            <i class="fas fa-archive mr-1"></i>Archive
                                        </button>
                                    </td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>

</body>
</html>
